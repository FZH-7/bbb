import{_ as s,l as e,t as a,c as l,w as t,v as c,x as o,M as r,y as i,o as d,a as u,L as n,D as f,F as p,E as _,K as k,G as m,A as g,B as y,C as h,H as C,P as v,Q as b,N as x,R as z}from"./vendor.Ckgv2xgH.js";import{u as j}from"./cart.Cwdcc7pj.js";import{u as A}from"./useSystem.Wa4UmrYm.js";import{g as L}from"./image.BWdQ8Foy.js";const q=s({__name:"cart",setup(s){const q=j(),{navTo:F}=A(),P=e(()=>q.cartList),Q=e(()=>q.isAllChecked),w=e(()=>q.totalPrice),B=e(()=>q.totalCount);a(()=>{});const D=()=>q.toggleAll(!q.isAllChecked),E=(s,e)=>{P.value[s].qty+e<=0?b({content:"确定要删除该商品吗？",success:e=>{e.confirm&&q.cartList.splice(s,1)}}):q.changeQty(s,e)},G=()=>{if(0===B.value)return void x({title:"请选择商品",icon:"none"});const s=q.checkedList;z("temp_order_items",s),F("/pages/order/createOrder")},H=s=>F(`/pages/product/product?id=${s}`),I=()=>F("/pages/index/index");return(s,e)=>{const a=o(i("uni-icons"),r),b=c,x=m,z=y;return d(),l(b,{class:"container"},{default:t(()=>[u(b,{class:"cart-list"},{default:t(()=>[(d(!0),f(p,null,_(P.value,(s,e)=>(d(),l(b,{class:"cart-item",key:e},{default:t(()=>[u(b,{class:"checkbox-area",onClick:s=>(s=>q.toggleCheck(s))(e)},{default:t(()=>[u(b,{class:k(["checkbox",{checked:s.checked}])},{default:t(()=>[s.checked?(d(),l(a,{key:0,type:"checkmarkempty",size:"14",color:"#fff"})):n("",!0)]),_:2},1032,["class"])]),_:2},1032,["onClick"]),u(x,{src:g(L)(s.image),mode:"aspectFill",class:"goods-img",onClick:e=>H(s.goods_id)},null,8,["src","onClick"]),u(b,{class:"goods-info"},{default:t(()=>[u(b,{onClick:e=>H(s.goods_id)},{default:t(()=>[u(z,{class:"goods-title"},{default:t(()=>[h(C(s.title),1)]),_:2},1024),u(z,{class:"goods-attr"},{default:t(()=>[h(C(s.attr||"标准规格"),1)]),_:2},1024)]),_:2},1032,["onClick"]),u(b,{class:"price-action"},{default:t(()=>[u(b,{class:"price-box"},{default:t(()=>[u(z,{class:"currency"},{default:t(()=>[h("¥")]),_:1}),u(z,{class:"price"},{default:t(()=>[h(C(s.price),1)]),_:2},1024)]),_:2},1024),u(b,{class:"stepper"},{default:t(()=>[u(b,{class:"step-btn minus",onClick:v(s=>E(e,-1),["stop"])},{default:t(()=>[u(a,{type:"minus",size:"14",color:"#fff"})]),_:2},1032,["onClick"]),u(z,{class:"step-num"},{default:t(()=>[h(C(s.qty),1)]),_:2},1024),u(b,{class:"step-btn plus",onClick:v(s=>E(e,1),["stop"])},{default:t(()=>[u(a,{type:"plus",size:"14",color:"#fff"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),0===P.value.length?(d(),l(b,{key:0,class:"empty"},{default:t(()=>[u(a,{type:"cart",size:"48",color:"#ddd"}),u(z,{class:"tip"},{default:t(()=>[h("购物车空空如也")]),_:1}),u(b,{class:"btn",onClick:I},{default:t(()=>[h("去逛逛")]),_:1})]),_:1})):n("",!0),u(b,{class:"footer-spacer"}),P.value.length>0?(d(),l(b,{key:1,class:"footer-bar"},{default:t(()=>[u(b,{class:"select-all",onClick:D},{default:t(()=>[u(b,{class:k(["checkbox",{checked:Q.value}])},{default:t(()=>[Q.value?(d(),l(a,{key:0,type:"checkmarkempty",size:"14",color:"#fff"})):n("",!0)]),_:1},8,["class"]),u(z,{class:"label"},{default:t(()=>[h("全选")]),_:1})]),_:1}),u(b,{class:"action-right"},{default:t(()=>[u(b,{class:"total-info"},{default:t(()=>[u(z,{class:"label"},{default:t(()=>[h("合计:")]),_:1}),u(z,{class:"total-price"},{default:t(()=>[u(z,{class:"currency"},{default:t(()=>[h("¥")]),_:1}),h(C(w.value),1)]),_:1})]),_:1}),u(b,{class:"buy-btn",onClick:G,"hover-class":"btn-hover"},{default:t(()=>[h(" 结算 ("+C(B.value)+") ",1)]),_:1})]),_:1})]),_:1})):n("",!0)]),_:1})}}},[["__scopeId","data-v-97e1febc"]]);export{q as default};
