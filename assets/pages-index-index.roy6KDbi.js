import{_ as a,k as s,l as e,m as l,n as t,p as c,q as r,t as i,c as o,w as n,u as d,v as u,x as f,y as p,o as _,a as g,z as m,A as k,B as h,C as b,D as y,F as v,E as x,G as w,H as C,S as z,I as q,J as B,K as j,L as F,M as H,N as I}from"./vendor.Ckgv2xgH.js";import{r as L,s as S}from"./request.Bx5oBM20.js";import{u as D}from"./useSystem.DX_vEvkG.js";import{V as P}from"./VirtualList.HuLulpwA.js";const V={async getBanners(){const a=await L(async()=>S.from("banners").select("*").order("sort",{ascending:!0}),{requestId:"home_banners",showLoading:!1});return a&&a.data?a.data:[]},async getHotProducts(){const a=await L(async()=>S.from("goods").select("*").order("created_at",{ascending:!0}),{requestId:"home_hot_products",showLoading:!0});return a&&a.data?a.data:[]}},A=a({__name:"index",setup(a){const{navTo:L,statusBarHeight:S}=D(),A=s([]),E=s([]),G=s(0),J=["综合推荐","销量榜","新品上市"],K=s(280),M=e(()=>{const a=[];for(let s=0;s<E.value.length;s+=2)a.push(E.value.slice(s,s+2));return a}),N=()=>{K.value=d(564)},T=a=>{I({title:a,icon:"none"})};l(()=>{N(),t(N)}),c(()=>{r(N)}),i(()=>{(async()=>{A.value=await V.getBanners(),E.value=await V.getHotProducts()})(),N()});const $=a=>{const s=(null==a?void 0:a.id)||1;L(`/pages/product/product?id=${s}`)},O=[{text:"限时抢购",icon:"fire-filled",bg:"#000000"},{text:"品牌闪购",icon:"shop-filled",bg:"#000000"},{text:"每日福利",icon:"gift-filled",bg:"#000000"},{text:"会员中心",icon:"vip-filled",bg:"#000000"}];return(a,s)=>{const e=u,l=f(p("uni-icons"),H),t=h,c=w,r=q,i=z,d=B;return _(),o(e,{class:"container"},{default:n(()=>[g(e,{style:m({height:k(S)+"px"}),class:"status-bar-spacer"},null,8,["style"]),g(e,{class:"header-bar"},{default:n(()=>[g(e,{class:"header-left"},{default:n(()=>[g(l,{type:"scan",size:"24",color:"#333"})]),_:1}),g(e,{class:"search-box",onClick:s[0]||(s[0]=a=>k(L)("/pages/search/search"))},{default:n(()=>[g(l,{type:"search",size:"18",color:"#999"}),g(t,{class:"placeholder"},{default:n(()=>[b("搜索热门商品")]),_:1})]),_:1}),g(e,{class:"header-right"},{default:n(()=>[g(l,{type:"chat",size:"24",color:"#333",onClick:s[1]||(s[1]=a=>T("消息功能开发中"))})]),_:1})]),_:1}),g(P,{listData:M.value,itemSize:K.value,height:"calc(100vh - 50px)"},{header:n(()=>[g(e,{class:"banner-wrapper"},{default:n(()=>[g(i,{class:"swiper","indicator-dots":"",autoplay:"",circular:"","indicator-color":"rgba(255, 255, 255, 0.5)","indicator-active-color":"#00CBCC"},{default:n(()=>[(_(!0),y(v,null,x(A.value,a=>(_(),o(r,{key:a.id},{default:n(()=>[g(e,{class:"swiper-item-inner",onClick:s=>(a=>{a.link&&L(a.link)})(a)},{default:n(()=>[g(c,{src:a.image,mode:"aspectFill",class:"banner-img"},null,8,["src"])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),g(e,{class:"nav-section"},{default:n(()=>[(_(),y(v,null,x(O,(a,s)=>g(e,{class:"nav-item",key:s,onClick:s=>(a=>{switch(a.text){case"限时抢购":L("/pages/marketing/flash-sale");break;case"品牌闪购":L("/pages/marketing/brand-sale");break;case"每日福利":L("/pages/marketing/welfare");break;case"积分商城":L("/pages/product/list?title=积分商城");break;case"会员中心":L("/pages/user/member");break;default:T(a.text+" 功能开发中")}})(a)},{default:n(()=>[g(e,{class:"icon-box",style:m({background:a.bg})},{default:n(()=>[g(l,{type:a.icon,color:"#fff",size:"24"},null,8,["type"])]),_:2},1032,["style"]),g(t,{class:"nav-text"},{default:n(()=>[b(C(a.text),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1}),g(e,{class:"section-header"},{default:n(()=>[g(t,{class:"title"},{default:n(()=>[b("本周流行")]),_:1}),g(e,{class:"more"},{default:n(()=>[g(t,null,{default:n(()=>[b("查看更多")]),_:1}),g(l,{type:"arrowright",size:"12",color:"#999"})]),_:1})]),_:1}),g(d,{"scroll-x":"",class:"trending-scroll","show-scrollbar":"false"},{default:n(()=>[g(e,{class:"trending-list"},{default:n(()=>[(_(!0),y(v,null,x(E.value.slice(0,10),(a,s)=>(_(),o(e,{class:"trending-card",key:s,onClick:s=>$(a)},{default:n(()=>[g(c,{src:a.cover,mode:"aspectFill",class:"t-img"},null,8,["src"]),g(t,{class:"t-title"},{default:n(()=>[b(C(a.name),1)]),_:2},1024),g(t,{class:"t-price"},{default:n(()=>[b("¥"+C(a.price),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),g(e,{class:"sticky-tabs"},{default:n(()=>[(_(),y(v,null,x(J,(a,s)=>g(e,{class:j(["tab-item",{active:G.value===s}]),key:s,onClick:a=>G.value=s},{default:n(()=>[b(C(a)+" ",1),G.value===s?(_(),o(e,{key:0,class:"indicator"})):F("",!0)]),_:2},1032,["class","onClick"])),64))]),_:1})]),default:n(({row:a})=>[g(e,{class:"product-row"},{default:n(()=>[(_(!0),y(v,null,x(a,a=>(_(),o(e,{class:"product-card",key:a.id,onClick:s=>$(a)},{default:n(()=>[g(e,{class:"card-img-box"},{default:n(()=>[g(c,{src:a.cover,mode:"aspectFill",class:"p-img"},null,8,["src"])]),_:2},1024),g(e,{class:"p-info"},{default:n(()=>[g(t,{class:"p-title"},{default:n(()=>[b(C(a.name),1)]),_:2},1024),g(e,{class:"p-bottom"},{default:n(()=>[g(e,{class:"price-box"},{default:n(()=>[g(t,{class:"currency"},{default:n(()=>[b("¥")]),_:1}),g(t,{class:"price"},{default:n(()=>[b(C(a.price),1)]),_:2},1024)]),_:2},1024),g(e,{class:"add-btn"},{default:n(()=>[g(l,{type:"plus",size:"16",color:"#fff"})]),_:1})]),_:2},1024),g(t,{class:"p-sales"},{default:n(()=>[b(C(a.sales)+"人付款",1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:1},8,["listData","itemSize"])]),_:1})}}},[["__scopeId","data-v-21425afd"]]);export{A as default};
