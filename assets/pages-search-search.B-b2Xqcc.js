import{_ as a,k as e,U as s,V as l,c as t,w as c,v as u,x as o,M as r,y as n,o as i,a as d,L as f,a1 as p,B as _,C as v,D as h,F as y,E as m,H as k,G as g,A as C,a2 as b,R as x,Z as z,$ as j,Q as V,a3 as O,a4 as q}from"./vendor.Ckgv2xgH.js";import{p as w}from"./product.CkM9Osij.js";import{g as F}from"./image.BWdQ8Foy.js";import"./request.Bx5oBM20.js";const J=a({__name:"search",setup(a){const J=e(""),N=e([]),S=e(null),U=e(["ç§‹å­£æ–°å“","é™æ—¶ç‰¹æƒ ","æ‰‹æœºæ•°ç ","å®¶å±…ç”¨å“","è¿åŠ¨å¥èº«"]);s(()=>{const a=l("search_history");a&&(N.value=JSON.parse(a))});const $=()=>{J.value="",S.value=null},A=async()=>{if(!J.value.trim())return;const a=J.value.trim(),e=N.value.indexOf(a);-1!==e&&N.value.splice(e,1),N.value.unshift(a),N.value.length>10&&N.value.pop(),x("search_history",JSON.stringify(N.value)),z({title:"æœç´¢ä¸­..."});const s=await w.searchProducts(a);S.value=s||[],j()},B=a=>{J.value=a,A()},D=()=>{V({content:"ç¡®å®šæ¸…ç©ºåŽ†å²æœç´¢è®°å½•å—ï¼Ÿ",success:a=>{a.confirm&&(N.value=[],O("search_history"))}})},E=()=>{b()};return(a,e)=>{const s=o(n("uni-icons"),r),l=p,b=u,x=_,z=g;return i(),t(b,{class:"container"},{default:c(()=>[d(b,{class:"search-header"},{default:c(()=>[d(s,{type:"left",size:"22",color:"#333",class:"back-btn",onClick:E}),d(b,{class:"input-box"},{default:c(()=>[d(s,{type:"search",size:"18",color:"#999"}),d(l,{class:"input",type:"text",modelValue:J.value,"onUpdate:modelValue":e[0]||(e[0]=a=>J.value=a),placeholder:"æœç´¢çƒ­é—¨å•†å“","confirm-type":"search",focus:"",onConfirm:A},null,8,["modelValue"]),J.value?(i(),t(s,{key:0,type:"clear",size:"18",color:"#ccc",onClick:$})):f("",!0)]),_:1}),d(x,{class:"search-btn",onClick:A},{default:c(()=>[v("æœç´¢")]),_:1})]),_:1}),!S.value&&U.value.length>0?(i(),t(b,{key:0,class:"hot-section"},{default:c(()=>[d(b,{class:"section-header"},{default:c(()=>[d(x,{class:"title"},{default:c(()=>[v("ðŸ”¥ çƒ­é—¨æœç´¢")]),_:1})]),_:1}),d(b,{class:"tags"},{default:c(()=>[(i(!0),h(y,null,m(U.value,(a,e)=>(i(),t(x,{class:"tag hot",key:e,onClick:e=>B(a)},{default:c(()=>[v(k(a),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):f("",!0),!S.value&&N.value.length>0?(i(),t(b,{key:1,class:"history-section"},{default:c(()=>[d(b,{class:"section-header"},{default:c(()=>[d(x,{class:"title"},{default:c(()=>[v("åŽ†å²æœç´¢")]),_:1}),d(s,{type:"trash",size:"16",color:"#999",onClick:D})]),_:1}),d(b,{class:"tags"},{default:c(()=>[(i(!0),h(y,null,m(N.value,(a,e)=>(i(),t(x,{class:"tag",key:e,onClick:e=>B(a)},{default:c(()=>[v(k(a),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):f("",!0),S.value?(i(),t(b,{key:2,class:"result-section"},{default:c(()=>[S.value.length>0?(i(),t(b,{key:0,class:"result-header"},{default:c(()=>[d(x,null,{default:c(()=>[v("æ‰¾åˆ° "+k(S.value.length)+" ä¸ªç›¸å…³å•†å“",1)]),_:1})]),_:1})):f("",!0),0===S.value.length?(i(),t(b,{key:1,class:"empty-state"},{default:c(()=>[d(s,{type:"search",size:"48",color:"#ddd"}),d(x,null,{default:c(()=>[v("æœªæ‰¾åˆ°ç›¸å…³å•†å“")]),_:1})]),_:1})):f("",!0),d(b,{class:"product-list"},{default:c(()=>[(i(!0),h(y,null,m(S.value,a=>(i(),t(b,{class:"product-item",key:a.id,onClick:e=>(a=>{q({url:`/pages/product/product?id=${a.id}`})})(a)},{default:c(()=>[d(z,{src:C(F)(a.cover),mode:"aspectFill",class:"p-img"},null,8,["src"]),d(b,{class:"p-info"},{default:c(()=>[d(x,{class:"p-name"},{default:c(()=>[v(k(a.name),1)]),_:2},1024),d(b,{class:"p-price-box"},{default:c(()=>[d(x,{class:"symbol"},{default:c(()=>[v("Â¥")]),_:1}),d(x,{class:"price"},{default:c(()=>[v(k(a.price),1)]),_:2},1024),d(x,{class:"sales"},{default:c(()=>[v(k(a.sales)+"äººä»˜æ¬¾",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):f("",!0)]),_:1})}}},[["__scopeId","data-v-3f671ee1"]]);export{J as default};
