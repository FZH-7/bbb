import{Y as e,k as t,l as a,N as c,R as l,V as r}from"./vendor.Ckgv2xgH.js";const d=e("cart",()=>{const e=t([]),l=a(()=>e.value.filter(e=>e.checked)),r=a(()=>e.value.filter(e=>e.checked).reduce((e,t)=>e+Number(t.price)*t.qty,0).toFixed(2)),d=a(()=>e.value.filter(e=>e.checked).reduce((e,t)=>e+t.qty,0)),s=a(()=>e.value.reduce((e,t)=>e+t.qty,0)),u=a(()=>e.value.length>0&&e.value.every(e=>e.checked));return{cartList:e,checkedList:l,totalPrice:r,totalCount:d,badgeCount:s,isAllChecked:u,addToCart:t=>{const a=e.value.findIndex(e=>e.goods_id===t.goods_id&&e.attr===t.attr);a>-1?e.value[a].qty+=t.qty:e.value.unshift({...t,checked:!0}),c({title:"已添加到购物车"})},changeQty:(t,a)=>{const c=e.value[t],l=c.qty+a;l>=1&&(c.qty=l)},toggleCheck:t=>{e.value[t].checked=!e.value[t].checked},toggleAll:t=>{e.value.forEach(e=>e.checked=t)},clearCart:()=>{e.value=e.value.filter(e=>!e.checked)}}},{persist:{key:"cart",paths:["cartList"],storage:{getItem:e=>r(e),setItem:(e,t)=>l(e,t)}}});export{d as u};
