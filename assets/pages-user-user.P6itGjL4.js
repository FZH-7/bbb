import{_ as e,k as a,t,c as s,w as l,v as o,x as r,M as c,y as u,T as i,o as d,a as f,z as n,A as p,G as _,B as m,C as g,H as y}from"./vendor.Ckgv2xgH.js";import{o as v}from"./order.CbSw1ZKD.js";import{m as k}from"./marketing.B3uJcO8V.js";import{u as b}from"./request.Bx5oBM20.js";import{u as h}from"./useSystem.Wa4UmrYm.js";import{g as x}from"./image.DRuPWd--.js";const z=e({__name:"user",setup(e){const z=b(),{navTo:C,statusBarHeight:w}=h(),I=a({0:0,1:0,2:0,3:0,4:0}),F=a({nickname:"立即登录",desc:"登录体验更多功能",avatar:x("/static/avatar.png"),balance:"0.00",points:0,couponCount:0});return t(()=>{(async()=>{var e;if(z.isLogin||await z.login(),z.userInfo){let e=0;const a=await k.getMyCoupons(z.userInfo.id);a&&(e=a.filter(e=>1===e.status).length),F.value={...z.userInfo,desc:"普通会员",avatar:x(z.userInfo.avatar||"/static/avatar.png"),couponCount:e}}if(null==(e=z.userInfo)?void 0:e.id){const e=await v.getOrderStats(z.userInfo.id);e&&(I.value=e)}else I.value={0:0,1:0,2:0,3:0,4:0}})()}),(e,a)=>{const t=o,v=r(u("uni-icons"),c),k=_,b=m,h=r(u("uni-badge"),i);return d(),s(t,{class:"container"},{default:l(()=>[f(t,{class:"header-bg"}),f(t,{class:"user-header",style:n({paddingTop:p(w)+10+"px"})},{default:l(()=>[f(t,{class:"header-content"},{default:l(()=>[f(t,{class:"header-actions"},{default:l(()=>[f(v,{type:"scan",size:"24",color:"#fff",style:{"margin-right":"20px"},onClick:a[0]||(a[0]=e=>p(C)("/pages/public/scan"))}),f(v,{type:"chat",size:"24",color:"#fff",onClick:a[1]||(a[1]=e=>p(C)("/pages/notice/notice"))})]),_:1}),f(t,{class:"user-info"},{default:l(()=>[f(t,{class:"avatar-ring"},{default:l(()=>[f(k,{class:"avatar",src:F.value.avatar,mode:"aspectFill"},null,8,["src"])]),_:1}),f(t,{class:"info-text"},{default:l(()=>[f(b,{class:"username"},{default:l(()=>[g(y(F.value.nickname||"立即登录"),1)]),_:1}),f(b,{class:"desc"},{default:l(()=>[g(y(F.value.desc||"登录体验更多功能"),1)]),_:1})]),_:1}),f(t,{class:"arrow-box"},{default:l(()=>[f(v,{type:"right",size:"16",color:"#fff"})]),_:1})]),_:1}),f(t,{class:"vip-card"},{default:l(()=>[f(t,{class:"vip-left"},{default:l(()=>[f(v,{type:"vip-filled",size:"20",color:"#FFD700"}),f(b,{class:"vip-text"},{default:l(()=>[g("开通会员，立享特权")]),_:1})]),_:1}),f(t,{class:"vip-btn",onClick:a[2]||(a[2]=e=>p(C)("/pages/user/member"))},{default:l(()=>[g("立即开通")]),_:1})]),_:1})]),_:1})]),_:1},8,["style"]),f(t,{class:"stats-card"},{default:l(()=>[f(t,{class:"stat-item"},{default:l(()=>[f(b,{class:"num"},{default:l(()=>[g(y(F.value.balance),1)]),_:1}),f(b,{class:"label"},{default:l(()=>[g("余额")]),_:1})]),_:1}),f(t,{class:"stat-item",onClick:a[3]||(a[3]=e=>p(C)("/pages/user/coupon"))},{default:l(()=>[f(b,{class:"num"},{default:l(()=>[g(y(F.value.couponCount),1)]),_:1}),f(b,{class:"label"},{default:l(()=>[g("优惠券")]),_:1})]),_:1}),f(t,{class:"stat-item"},{default:l(()=>[f(b,{class:"num"},{default:l(()=>[g(y(F.value.points),1)]),_:1}),f(b,{class:"label"},{default:l(()=>[g("积分")]),_:1})]),_:1}),f(t,{class:"stat-item"},{default:l(()=>[f(v,{type:"wallet-filled",size:"24",color:"#FF4560",style:{"margin-bottom":"4px"},onClick:a[4]||(a[4]=e=>p(C)("/pages/user/wallet"))}),f(b,{class:"label"},{default:l(()=>[g("我的钱包")]),_:1})]),_:1})]),_:1}),f(t,{class:"menu-card"},{default:l(()=>[f(t,{class:"card-header"},{default:l(()=>[f(b,{class:"title"},{default:l(()=>[g("我的订单")]),_:1}),f(t,{class:"more",onClick:a[5]||(a[5]=e=>p(C)("/pages/order/order?state=0"))},{default:l(()=>[f(b,null,{default:l(()=>[g("全部订单")]),_:1}),f(v,{type:"right",size:"12",color:"#999"})]),_:1})]),_:1}),f(t,{class:"order-grid"},{default:l(()=>[f(t,{class:"order-item",onClick:a[6]||(a[6]=e=>p(C)("/pages/order/order?state=0"))},{default:l(()=>[I.value[0]>0?(d(),s(h,{key:0,text:I.value[0],absolute:"rightTop"},{default:l(()=>[f(v,{type:"wallet",size:"28",color:"#666"})]),_:1},8,["text"])):(d(),s(v,{key:1,type:"wallet",size:"28",color:"#666"})),f(b,null,{default:l(()=>[g("待付款")]),_:1})]),_:1}),f(t,{class:"order-item",onClick:a[7]||(a[7]=e=>p(C)("/pages/order/order?state=1"))},{default:l(()=>[I.value[1]>0?(d(),s(h,{key:0,text:I.value[1],absolute:"rightTop"},{default:l(()=>[f(v,{type:"gift",size:"28",color:"#666"})]),_:1},8,["text"])):(d(),s(v,{key:1,type:"gift",size:"28",color:"#666"})),f(b,null,{default:l(()=>[g("待发货")]),_:1})]),_:1}),f(t,{class:"order-item",onClick:a[8]||(a[8]=e=>p(C)("/pages/order/order?state=2"))},{default:l(()=>[I.value[2]>0?(d(),s(h,{key:0,text:I.value[2],absolute:"rightTop"},{default:l(()=>[f(v,{type:"paperplane",size:"28",color:"#666"})]),_:1},8,["text"])):(d(),s(v,{key:1,type:"paperplane",size:"28",color:"#666"})),f(b,null,{default:l(()=>[g("待收货")]),_:1})]),_:1}),f(t,{class:"order-item",onClick:a[9]||(a[9]=e=>p(C)("/pages/order/order?state=3"))},{default:l(()=>[I.value[3]>0?(d(),s(h,{key:0,text:I.value[3],absolute:"rightTop"},{default:l(()=>[f(v,{type:"chatboxes",size:"28",color:"#666"})]),_:1},8,["text"])):(d(),s(v,{key:1,type:"chatboxes",size:"28",color:"#666"})),f(b,null,{default:l(()=>[g("待评价")]),_:1})]),_:1}),f(t,{class:"order-item",onClick:a[10]||(a[10]=e=>p(C)("/pages/order/afterSale"))},{default:l(()=>[f(v,{type:"headphones",size:"28",color:"#666"}),f(b,null,{default:l(()=>[g("退款/售后")]),_:1})]),_:1})]),_:1})]),_:1}),f(t,{class:"menu-card no-padding"},{default:l(()=>[f(t,{class:"menu-item border-bottom",onClick:a[11]||(a[11]=e=>p(C)("/pages/address/address"))},{default:l(()=>[f(t,{class:"left"},{default:l(()=>[f(v,{type:"location-filled",size:"22",color:"#5FC3E4"}),f(b,{class:"menu-text"},{default:l(()=>[g("地址管理")]),_:1})]),_:1}),f(v,{type:"right",size:"14",color:"#ccc"})]),_:1}),f(t,{class:"menu-item border-bottom",onClick:a[12]||(a[12]=e=>p(C)("/pages/product/list?title=我的收藏&type=favorite"))},{default:l(()=>[f(t,{class:"left"},{default:l(()=>[f(v,{type:"star-filled",size:"22",color:"#FFD93E"}),f(b,{class:"menu-text"},{default:l(()=>[g("我的收藏")]),_:1})]),_:1}),f(v,{type:"right",size:"14",color:"#ccc"})]),_:1}),f(t,{class:"menu-item",onClick:a[13]||(a[13]=e=>p(C)("/pages/set/set"))},{default:l(()=>[f(t,{class:"left"},{default:l(()=>[f(v,{type:"gear-filled",size:"22",color:"#A0A0A0"}),f(b,{class:"menu-text"},{default:l(()=>[g("设置")]),_:1})]),_:1}),f(v,{type:"right",size:"14",color:"#ccc"})]),_:1})]),_:1}),f(t,{class:"copyright"},{default:l(()=>[f(b,null,{default:l(()=>[g("GEMINI VUE3 DEMO")]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-27f5b2b6"]]);export{z as default};
