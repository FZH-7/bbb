import{_ as a,k as s,l as e,t as l,c as t,w as u,v as n,o as c,a as o,K as r,L as d,B as i,C as v,D as f,F as _,E as p,H as m,G as y,W as k}from"./vendor.Ckgv2xgH.js";import{m as g}from"./marketing.B3uJcO8V.js";import{u as b}from"./request.Bx5oBM20.js";const x=a({__name:"coupon",setup(a){const x=b(),C=s(0),h=s([]),F=e(()=>{const a=C.value+1;return h.value.filter(s=>s.status===a)}),j=a=>{if(!a)return"";const s=new Date(a);return`${s.getFullYear()}.${s.getMonth()+1}.${s.getDate()}`},w=()=>{k({url:"/pages/index/index"})};return l(()=>{(async()=>{var a;if(!(null==(a=x.userInfo)?void 0:a.id))return;const s=await g.getMyCoupons(x.userInfo.id);s&&(h.value=s)})()}),(a,s)=>{const e=i,l=n,k=y;return c(),t(l,{class:"container"},{default:u(()=>[o(l,{class:"tab-header"},{default:u(()=>[o(l,{class:r(["tab-item",{active:0===C.value}]),onClick:s[0]||(s[0]=a=>C.value=0)},{default:u(()=>[o(e,null,{default:u(()=>[v("未使用")]),_:1}),0===C.value?(c(),t(l,{key:0,class:"line"})):d("",!0)]),_:1},8,["class"]),o(l,{class:r(["tab-item",{active:1===C.value}]),onClick:s[1]||(s[1]=a=>C.value=1)},{default:u(()=>[o(e,null,{default:u(()=>[v("已使用")]),_:1}),1===C.value?(c(),t(l,{key:0,class:"line"})):d("",!0)]),_:1},8,["class"]),o(l,{class:r(["tab-item",{active:2===C.value}]),onClick:s[2]||(s[2]=a=>C.value=2)},{default:u(()=>[o(e,null,{default:u(()=>[v("已过期")]),_:1}),2===C.value?(c(),t(l,{key:0,class:"line"})):d("",!0)]),_:1},8,["class"])]),_:1}),o(l,{class:"coupon-list"},{default:u(()=>[(c(!0),f(_,null,p(F.value,(a,s)=>(c(),t(l,{class:r(["coupon-item",{disabled:0!==C.value}]),key:s},{default:u(()=>[o(l,{class:"left-part"},{default:u(()=>[o(l,{class:"price-box"},{default:u(()=>[o(e,{class:"symbol"},{default:u(()=>[v("¥")]),_:1}),o(e,{class:"money"},{default:u(()=>{var s;return[v(m((null==(s=a.coupons)?void 0:s.money)||0),1)]}),_:2},1024)]),_:2},1024),o(e,{class:"cond"},{default:u(()=>{var s;return[v(m((null==(s=a.coupons)?void 0:s.condition)||"无门槛"),1)]}),_:2},1024)]),_:2},1024),o(l,{class:"right-part"},{default:u(()=>[o(l,{class:"info"},{default:u(()=>[o(l,{class:"tags"},{default:u(()=>[o(e,{class:"tag"},{default:u(()=>{var s;return[v(m("platform"===(null==(s=a.coupons)?void 0:s.type)?"平台券":"专项券"),1)]}),_:2},1024),o(e,{class:"name"},{default:u(()=>{var s;return[v(m(null==(s=a.coupons)?void 0:s.name),1)]}),_:2},1024)]),_:2},1024),o(e,{class:"date"},{default:u(()=>{var s,e;return[v(m(j(null==(s=a.coupons)?void 0:s.start_time))+"-"+m(j(null==(e=a.coupons)?void 0:e.end_time)),1)]}),_:2},1024)]),_:2},1024),0===C.value?(c(),t(l,{key:0,class:"status-btn",onClick:w},{default:u(()=>[v("去使用")]),_:1})):d("",!0),1===C.value?(c(),t(k,{key:1,src:"./static/used.png",class:"status-icon",mode:"aspectFit"})):d("",!0),2===C.value?(c(),t(k,{key:2,src:"./static/expired.png",class:"status-icon",mode:"aspectFit"})):d("",!0)]),_:2},1024)]),_:2},1032,["class"]))),128)),0===F.value.length?(c(),t(l,{key:0,class:"empty-state"},{default:u(()=>[o(e,null,{default:u(()=>[v("暂无相关优惠券")]),_:1})]),_:1})):d("",!0)]),_:1})]),_:1})}}},[["__scopeId","data-v-43175180"]]);export{x as default};
