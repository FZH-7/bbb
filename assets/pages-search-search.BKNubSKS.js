import{_ as a,k as e,U as s,V as l,c as t,w as c,v as u,x as o,M as n,y as r,o as i,a as d,L as f,a1 as p,B as _,C as v,D as h,F as y,E as k,H as m,G as g,a2 as C,R as b,Z as x,$ as z,Q as V,a3 as j,a4 as O}from"./vendor.Ckgv2xgH.js";import{p as q}from"./product.CkM9Osij.js";import"./request.Bx5oBM20.js";const w=a({__name:"search",setup(a){const w=e(""),F=e([]),J=e(null),N=e(["ç§‹å­£æ–°å“","é™æ—¶ç‰¹æƒ ","æ‰‹æœºæ•°ç ","å®¶å±…ç”¨å“","è¿åŠ¨å¥èº«"]);s(()=>{const a=l("search_history");a&&(F.value=JSON.parse(a))});const S=()=>{w.value="",J.value=null},U=async()=>{if(!w.value.trim())return;const a=w.value.trim(),e=F.value.indexOf(a);-1!==e&&F.value.splice(e,1),F.value.unshift(a),F.value.length>10&&F.value.pop(),b("search_history",JSON.stringify(F.value)),x({title:"æœç´¢ä¸­..."});const s=await q.searchProducts(a);J.value=s||[],z()},$=a=>{w.value=a,U()},B=()=>{V({content:"ç¡®å®šæ¸…ç©ºåŽ†å²æœç´¢è®°å½•å—ï¼Ÿ",success:a=>{a.confirm&&(F.value=[],j("search_history"))}})},D=()=>{C()};return(a,e)=>{const s=o(r("uni-icons"),n),l=p,C=u,b=_,x=g;return i(),t(C,{class:"container"},{default:c(()=>[d(C,{class:"search-header"},{default:c(()=>[d(s,{type:"left",size:"22",color:"#333",class:"back-btn",onClick:D}),d(C,{class:"input-box"},{default:c(()=>[d(s,{type:"search",size:"18",color:"#999"}),d(l,{class:"input",type:"text",modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=a=>w.value=a),placeholder:"æœç´¢çƒ­é—¨å•†å“","confirm-type":"search",focus:"",onConfirm:U},null,8,["modelValue"]),w.value?(i(),t(s,{key:0,type:"clear",size:"18",color:"#ccc",onClick:S})):f("",!0)]),_:1}),d(b,{class:"search-btn",onClick:U},{default:c(()=>[v("æœç´¢")]),_:1})]),_:1}),!J.value&&N.value.length>0?(i(),t(C,{key:0,class:"hot-section"},{default:c(()=>[d(C,{class:"section-header"},{default:c(()=>[d(b,{class:"title"},{default:c(()=>[v("ðŸ”¥ çƒ­é—¨æœç´¢")]),_:1})]),_:1}),d(C,{class:"tags"},{default:c(()=>[(i(!0),h(y,null,k(N.value,(a,e)=>(i(),t(b,{class:"tag hot",key:e,onClick:e=>$(a)},{default:c(()=>[v(m(a),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):f("",!0),!J.value&&F.value.length>0?(i(),t(C,{key:1,class:"history-section"},{default:c(()=>[d(C,{class:"section-header"},{default:c(()=>[d(b,{class:"title"},{default:c(()=>[v("åŽ†å²æœç´¢")]),_:1}),d(s,{type:"trash",size:"16",color:"#999",onClick:B})]),_:1}),d(C,{class:"tags"},{default:c(()=>[(i(!0),h(y,null,k(F.value,(a,e)=>(i(),t(b,{class:"tag",key:e,onClick:e=>$(a)},{default:c(()=>[v(m(a),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):f("",!0),J.value?(i(),t(C,{key:2,class:"result-section"},{default:c(()=>[J.value.length>0?(i(),t(C,{key:0,class:"result-header"},{default:c(()=>[d(b,null,{default:c(()=>[v("æ‰¾åˆ° "+m(J.value.length)+" ä¸ªç›¸å…³å•†å“",1)]),_:1})]),_:1})):f("",!0),0===J.value.length?(i(),t(C,{key:1,class:"empty-state"},{default:c(()=>[d(s,{type:"search",size:"48",color:"#ddd"}),d(b,null,{default:c(()=>[v("æœªæ‰¾åˆ°ç›¸å…³å•†å“")]),_:1})]),_:1})):f("",!0),d(C,{class:"product-list"},{default:c(()=>[(i(!0),h(y,null,k(J.value,a=>(i(),t(C,{class:"product-item",key:a.id,onClick:e=>(a=>{O({url:`/pages/product/product?id=${a.id}`})})(a)},{default:c(()=>[d(x,{src:a.cover,mode:"aspectFill",class:"p-img"},null,8,["src"]),d(C,{class:"p-info"},{default:c(()=>[d(b,{class:"p-name"},{default:c(()=>[v(m(a.name),1)]),_:2},1024),d(C,{class:"p-price-box"},{default:c(()=>[d(b,{class:"symbol"},{default:c(()=>[v("Â¥")]),_:1}),d(b,{class:"price"},{default:c(()=>[v(m(a.price),1)]),_:2},1024),d(b,{class:"sales"},{default:c(()=>[v(m(a.sales)+"äººä»˜æ¬¾",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):f("",!0)]),_:1})}}},[["__scopeId","data-v-fb31271f"]]);export{w as default};
