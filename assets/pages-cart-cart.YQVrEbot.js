import{_ as s,l as e,t as a,c as l,w as t,v as c,x as o,M as r,y as d,o as i,a as u,L as n,D as f,F as _,E as p,K as k,G as m,B as y,C as g,H as h,P as C,Q as v,N as b,R as x}from"./vendor.Ckgv2xgH.js";import{u as z}from"./cart.Cwdcc7pj.js";import{u as L}from"./useSystem.DX_vEvkG.js";const j=s({__name:"cart",setup(s){const j=z(),{navTo:A}=L(),q=e(()=>j.cartList),F=e(()=>j.isAllChecked),P=e(()=>j.totalPrice),Q=e(()=>j.totalCount);a(()=>{});const w=()=>j.toggleAll(!j.isAllChecked),B=(s,e)=>{q.value[s].qty+e<=0?v({content:"确定要删除该商品吗？",success:e=>{e.confirm&&j.cartList.splice(s,1)}}):j.changeQty(s,e)},D=()=>{if(0===Q.value)return void b({title:"请选择商品",icon:"none"});const s=j.checkedList;x("temp_order_items",s),A("/pages/order/createOrder")},E=s=>A(`/pages/product/product?id=${s}`),G=()=>A("/pages/index/index");return(s,e)=>{const a=o(d("uni-icons"),r),v=c,b=m,x=y;return i(),l(v,{class:"container"},{default:t(()=>[u(v,{class:"cart-list"},{default:t(()=>[(i(!0),f(_,null,p(q.value,(s,e)=>(i(),l(v,{class:"cart-item",key:e},{default:t(()=>[u(v,{class:"checkbox-area",onClick:s=>(s=>j.toggleCheck(s))(e)},{default:t(()=>[u(v,{class:k(["checkbox",{checked:s.checked}])},{default:t(()=>[s.checked?(i(),l(a,{key:0,type:"checkmarkempty",size:"14",color:"#fff"})):n("",!0)]),_:2},1032,["class"])]),_:2},1032,["onClick"]),u(b,{src:s.image,mode:"aspectFill",class:"goods-img",onClick:e=>E(s.goods_id)},null,8,["src","onClick"]),u(v,{class:"goods-info"},{default:t(()=>[u(v,{onClick:e=>E(s.goods_id)},{default:t(()=>[u(x,{class:"goods-title"},{default:t(()=>[g(h(s.title),1)]),_:2},1024),u(x,{class:"goods-attr"},{default:t(()=>[g(h(s.attr||"标准规格"),1)]),_:2},1024)]),_:2},1032,["onClick"]),u(v,{class:"price-action"},{default:t(()=>[u(v,{class:"price-box"},{default:t(()=>[u(x,{class:"currency"},{default:t(()=>[g("¥")]),_:1}),u(x,{class:"price"},{default:t(()=>[g(h(s.price),1)]),_:2},1024)]),_:2},1024),u(v,{class:"stepper"},{default:t(()=>[u(v,{class:"step-btn minus",onClick:C(s=>B(e,-1),["stop"])},{default:t(()=>[u(a,{type:"minus",size:"14",color:"#fff"})]),_:2},1032,["onClick"]),u(x,{class:"step-num"},{default:t(()=>[g(h(s.qty),1)]),_:2},1024),u(v,{class:"step-btn plus",onClick:C(s=>B(e,1),["stop"])},{default:t(()=>[u(a,{type:"plus",size:"14",color:"#fff"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),0===q.value.length?(i(),l(v,{key:0,class:"empty"},{default:t(()=>[u(a,{type:"cart",size:"48",color:"#ddd"}),u(x,{class:"tip"},{default:t(()=>[g("购物车空空如也")]),_:1}),u(v,{class:"btn",onClick:G},{default:t(()=>[g("去逛逛")]),_:1})]),_:1})):n("",!0),u(v,{class:"footer-spacer"}),q.value.length>0?(i(),l(v,{key:1,class:"footer-bar"},{default:t(()=>[u(v,{class:"select-all",onClick:w},{default:t(()=>[u(v,{class:k(["checkbox",{checked:F.value}])},{default:t(()=>[F.value?(i(),l(a,{key:0,type:"checkmarkempty",size:"14",color:"#fff"})):n("",!0)]),_:1},8,["class"]),u(x,{class:"label"},{default:t(()=>[g("全选")]),_:1})]),_:1}),u(v,{class:"action-right"},{default:t(()=>[u(v,{class:"total-info"},{default:t(()=>[u(x,{class:"label"},{default:t(()=>[g("合计:")]),_:1}),u(x,{class:"total-price"},{default:t(()=>[u(x,{class:"currency"},{default:t(()=>[g("¥")]),_:1}),g(h(P.value),1)]),_:1})]),_:1}),u(v,{class:"buy-btn",onClick:D,"hover-class":"btn-hover"},{default:t(()=>[g(" 结算 ("+h(Q.value)+") ",1)]),_:1})]),_:1})]),_:1})):n("",!0)]),_:1})}}},[["__scopeId","data-v-6a7c45e4"]]);export{j as default};
