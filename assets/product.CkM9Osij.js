import{r as e,s as t}from"./request.Bx5oBM20.js";const a={getProducts:async({categoryId:a,brandId:s,page:o=1,pageSize:r=20}={})=>e(async()=>{let e=t.from("goods").select("*",{count:"exact"}).order("created_at",{ascending:!0});a&&(e=e.eq("category_id",a)),s&&(e=e.eq("brand_id",s));const d=(o-1)*r,n=d+r-1,{data:c,count:i}=await e.range(d,n);return{list:c,total:i}},{requestId:`products_list_${a||0}_${s||0}_${o}`,showLoading:!0}).then(e=>e&&e.data?e.data:{list:[],total:0}),async getProductById(a){const s=await e(async()=>t.from("goods").select("*").eq("id",a).single(),{requestId:`product_detail_${a}`,showLoading:!0});return s?s.data:null},searchProducts:async a=>a?e(async()=>{const{data:e}=await t.from("categories").select("id").ilike("name",`%${a}%`),s=(e||[]).map(e=>e.id);let o=t.from("goods").select("*");return o=s.length>0?o.or(`name.ilike.%${a}%,category_id.in.(${s.join(",")})`):o.ilike("name",`%${a}%`),o.order("sales",{ascending:!1})},{requestId:`search_${a}`,showLoading:!0}).then(e=>e?e.data:[]):[]};export{a as p};
