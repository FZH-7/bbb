import{_ as a,k as s,t as e,c as t,w as o,v as n,x as l,M as d,y as r,o as c,a as i,D as u,B as p,C as _,F as g,E as m,G as f,A as b,H as y,J as v}from"./vendor.Ckgv2xgH.js";import{r as k,s as x}from"./request.Bx5oBM20.js";import{u as h}from"./useSystem.Wa4UmrYm.js";import{g as w}from"./image.BWdQ8Foy.js";const A={async getBrandList(){const a=await k(async()=>x.from("brands").select("*, goods(*)").order("created_at",{ascending:!1}),{requestId:"brand_list_final",showLoading:!0});console.log("Brand API Result (with goods):",a);let s=[];return a&&a.success&&a.data&&a.data.length>0?s=a.data.map(a=>({...a,products:Array.isArray(a.goods)?a.goods.slice(0,10):[]})):(console.warn("Database returned empty brands, using mock data for demo."),s=[{id:1,name:"Apple 官方旗舰店",logo:"/static/brands/brand_apple.svg",desc_text:"由 Apple 官方直接运营，原装正品保障",products:[{id:101,name:"iPhone 15 Pro",price:"7999.00",cover:"/static/goods/iphone_15_pro_max.png"},{id:102,name:"iPad Air (M2 芯片)",price:"4799.00",cover:"/static/goods/iphone_15_pro_max.png"},{id:103,name:"MacBook Pro 14英寸",price:"12999.00",cover:"/static/goods/thinkpad_x1.png"}]},{id:2,name:"Nike 耐克官方店",logo:"/static/banner_new.png",desc_text:"运动改变生活，发现你的潜能",products:[{id:201,name:"Air Jordan 1 Retro High",price:"1299.00",cover:"/static/banner_new.png"},{id:202,name:"Dunk Low 复古运动鞋",price:"799.00",cover:"/static/banner_new.png"}]}]),s},async getBrandById(a){const s=await k(async()=>x.from("brands").select("*").eq("id",a).single(),{requestId:`brand_detail_${a}`,showLoading:!0});return s?s.data:null}},B=a({__name:"brand-sale",setup(a){const{navTo:k}=h(),x=s([]),B=s(!1);return e(()=>{(async()=>{B.value=!0;try{const a=await A.getBrandList();a&&(x.value=a)}finally{B.value=!1}})()}),(a,s)=>{const e=p,h=n,A=f,L=v,q=l(r("uni-icons"),d);return c(),t(h,{class:"container"},{default:o(()=>[i(h,{class:"brand-header"},{default:o(()=>[i(h,{class:"title-box"},{default:o(()=>[i(e,{class:"en"},{default:o(()=>[_("BRAND SALE")]),_:1}),i(e,{class:"cn"},{default:o(()=>[_("品牌闪购")]),_:1})]),_:1})]),_:1}),x.value.length>0?(c(!0),u(g,{key:0},m(x.value,(a,s)=>(c(),t(h,{class:"brand-section",key:s},{default:o(()=>[i(h,{class:"brand-info-card"},{default:o(()=>[i(h,{class:"brand-logo-box"},{default:o(()=>[i(A,{src:b(w)(a.logo),mode:"aspectFit",class:"brand-logo"},null,8,["src"])]),_:2},1024),i(h,{class:"brand-text"},{default:o(()=>[i(e,{class:"name"},{default:o(()=>[_(y(a.name),1)]),_:2},1024),i(e,{class:"desc"},{default:o(()=>[_(y(a.desc_text),1)]),_:2},1024)]),_:2},1024),i(h,{class:"enter-btn"},{default:o(()=>[_("进入品牌")]),_:1})]),_:2},1024),i(L,{"scroll-x":"",class:"brand-goods-scroll"},{default:o(()=>[i(h,{class:"goods-list"},{default:o(()=>[(c(!0),u(g,null,m(a.products,(a,s)=>(c(),t(h,{class:"goods-item",key:s,onClick:s=>(a=>{k(`/pages/product/product?id=${a.id}`)})(a)},{default:o(()=>[i(A,{src:b(w)(a.cover),mode:"aspectFill",class:"g-img"},null,8,["src"]),i(e,{class:"g-name"},{default:o(()=>[_(y(a.name),1)]),_:2},1024),i(e,{class:"g-price"},{default:o(()=>[_("¥"+y(a.price),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):(c(),t(h,{key:1,class:"empty-box"},{default:o(()=>[B.value?(c(),t(h,{key:0,class:"loading-state"},{default:o(()=>[i(q,{type:"refreshempty",size:"30",color:"#666",class:"spinning"}),i(e,null,{default:o(()=>[_("正在觅食品牌...")]),_:1})]),_:1})):(c(),t(h,{key:1,class:"no-data-state"},{default:o(()=>[i(q,{type:"info",size:"40",color:"#444"}),i(e,null,{default:o(()=>[_("暂无闪购活动，稍后再来吧")]),_:1})]),_:1}))]),_:1}))]),_:1})}}},[["__scopeId","data-v-6aed3b21"]]);export{B as default};
