import{_ as a,k as e,t as s,c as t,w as l,v as d,x as n,M as c,y as o,o as r,a as i,D as u,B as p,C as g,F as f,E as m,G as _,H as b,J as y}from"./vendor.Ckgv2xgH.js";import{r as v,s as h}from"./request.Bx5oBM20.js";import{u as k}from"./useSystem.DX_vEvkG.js";const j={async getBrandList(){const a=await v(async()=>h.from("brands").select("*, goods(*)").order("created_at",{ascending:!1}),{requestId:"brand_list_final",showLoading:!0});console.log("Brand API Result (with goods):",a);let e=[];return a&&a.success&&a.data&&a.data.length>0?e=a.data.map(a=>({...a,products:Array.isArray(a.goods)?a.goods.slice(0,10):[]})):(console.warn("Database returned empty brands, using mock data for demo."),e=[{id:1,name:"Apple 官方旗舰店",logo:"https://img.yzcdn.cn/vant/apple-1.jpg",desc_text:"由 Apple 官方直接运营，原装正品保障",products:[{id:101,name:"iPhone 15 Pro",price:"7999.00",cover:"https://p1.meituan.net/travel/d8b39804b7260533cd0a6f4a21132644342416.jpg"},{id:102,name:"iPad Air (M2 芯片)",price:"4799.00",cover:"https://p0.meituan.net/travel/088656d027e02e88a0b06a88b2096a6d343542.jpg"},{id:103,name:"MacBook Pro 14英寸",price:"12999.00",cover:"https://p0.meituan.net/travel/3d9396e4566c1b3f66c94bb24869c96a324541.jpg"}]},{id:2,name:"Nike 耐克官方店",logo:"https://img.yzcdn.cn/vant/apple-2.jpg",desc_text:"运动改变生活，发现你的潜能",products:[{id:201,name:"Air Jordan 1 Retro High",price:"1299.00",cover:"https://p1.meituan.net/travel/08c0f7b0a880628e8a6096a8b2096a6d343542.jpg"},{id:202,name:"Dunk Low 复古运动鞋",price:"799.00",cover:"https://p1.meituan.net/travel/08c0f7b0a880628e8a6096a8b2096a6d343542.jpg"}]}]),e},async getBrandById(a){const e=await v(async()=>h.from("brands").select("*").eq("id",a).single(),{requestId:`brand_detail_${a}`,showLoading:!0});return e?e.data:null}},x=a({__name:"brand-sale",setup(a){const{navTo:v}=k(),h=e([]),x=e(!1);return s(()=>{(async()=>{x.value=!0;try{const a=await j.getBrandList();a&&(h.value=a)}finally{x.value=!1}})()}),(a,e)=>{const s=p,k=d,j=_,w=y,A=n(o("uni-icons"),c);return r(),t(k,{class:"container"},{default:l(()=>[i(k,{class:"brand-header"},{default:l(()=>[i(k,{class:"title-box"},{default:l(()=>[i(s,{class:"en"},{default:l(()=>[g("BRAND SALE")]),_:1}),i(s,{class:"cn"},{default:l(()=>[g("品牌闪购")]),_:1})]),_:1})]),_:1}),h.value.length>0?(r(!0),u(f,{key:0},m(h.value,(a,e)=>(r(),t(k,{class:"brand-section",key:e},{default:l(()=>[i(k,{class:"brand-info-card"},{default:l(()=>[i(k,{class:"brand-logo-box"},{default:l(()=>[i(j,{src:a.logo,mode:"aspectFit",class:"brand-logo"},null,8,["src"])]),_:2},1024),i(k,{class:"brand-text"},{default:l(()=>[i(s,{class:"name"},{default:l(()=>[g(b(a.name),1)]),_:2},1024),i(s,{class:"desc"},{default:l(()=>[g(b(a.desc_text),1)]),_:2},1024)]),_:2},1024),i(k,{class:"enter-btn"},{default:l(()=>[g("进入品牌")]),_:1})]),_:2},1024),i(w,{"scroll-x":"",class:"brand-goods-scroll"},{default:l(()=>[i(k,{class:"goods-list"},{default:l(()=>[(r(!0),u(f,null,m(a.products,(a,e)=>(r(),t(k,{class:"goods-item",key:e,onClick:e=>(a=>{v(`/pages/product/product?id=${a.id}`)})(a)},{default:l(()=>[i(j,{src:a.cover,mode:"aspectFill",class:"g-img"},null,8,["src"]),i(s,{class:"g-name"},{default:l(()=>[g(b(a.name),1)]),_:2},1024),i(s,{class:"g-price"},{default:l(()=>[g("¥"+b(a.price),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):(r(),t(k,{key:1,class:"empty-box"},{default:l(()=>[x.value?(r(),t(k,{key:0,class:"loading-state"},{default:l(()=>[i(A,{type:"refreshempty",size:"30",color:"#666",class:"spinning"}),i(s,null,{default:l(()=>[g("正在觅食品牌...")]),_:1})]),_:1})):(r(),t(k,{key:1,class:"no-data-state"},{default:l(()=>[i(A,{type:"info",size:"40",color:"#444"}),i(s,null,{default:l(()=>[g("暂无闪购活动，稍后再来吧")]),_:1})]),_:1}))]),_:1}))]),_:1})}}},[["__scopeId","data-v-bc6aa00c"]]);export{x as default};
