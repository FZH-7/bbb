import{_ as e,k as a,l as t,a9 as l,m as s,c as i,o as u,w as n,a as v,v as o,aa as r,z as c,D as d,F as h,E as m,ab as f,ac as p,O as y,J as g}from"./vendor.Ckgv2xgH.js";const x=e({__name:"VirtualList",props:{listData:{type:Array,default:()=>[]},itemSize:{type:Number,default:280},height:{type:String,default:"100vh"},buffer:{type:Number,default:1}},setup(e){const x=e,_=p(),b=a(0),S=a(0),z=a(0),M=a(0);let D=0;const w=t(()=>x.listData.length*x.itemSize),$=t(()=>b.value<=0?3:Math.ceil(b.value/x.itemSize)),k=t(()=>Math.ceil($.value*x.buffer)),C=t(()=>S.value+$.value+k.value),N=t(()=>{const e=Math.max(0,S.value-k.value);return x.listData.slice(e,Math.min(C.value,x.listData.length)).map((a,t)=>({item:a,index:e+t,_vid:e+t}))}),R=e=>{const a=e.detail.scrollTop;if(D=a,a>M.value){const e=a-M.value,t=Math.floor(e/x.itemSize);if(t!==S.value){S.value=t;const e=Math.max(0,S.value-k.value);z.value=e*x.itemSize}}else 0!==S.value&&(S.value=0,z.value=0)},T=()=>{y(()=>{f().in(_).select("#list-header").boundingClientRect(e=>{const a=e?e.height:0;Math.abs(a-M.value)>1&&(M.value=a,R({detail:{scrollTop:D}}))}).exec()})};return l(()=>x.listData,()=>{T()},{deep:!1}),s(()=>{f().in(_).select(".virtual-list-container").boundingClientRect(e=>{e&&e.height>0&&(b.value=e.height)}).exec(),T()}),(a,t)=>{const l=o,s=g;return u(),i(s,{class:"virtual-list-container",style:c({height:e.height}),"scroll-y":"",onScroll:R},{default:n(()=>[v(l,{class:"list-header",id:"list-header"},{default:n(()=>[r(a.$slots,"header",{},void 0,!0)]),_:3}),v(l,{class:"phantom",style:c({height:M.value+w.value+"px"})},null,8,["style"]),v(l,{class:"list-view",style:c({transform:`translate3d(0, ${z.value+M.value}px, 0)`})},{default:n(()=>[(u(!0),d(h,null,m(N.value,t=>(u(),i(l,{class:"list-item",key:t._vid,style:c({height:e.itemSize+"px"})},{default:n(()=>[r(a.$slots,"default",{row:t.item,index:t.index},void 0,!0)]),_:2},1032,["style"]))),128))]),_:3},8,["style"])]),_:3},8,["style"])}}},[["__scopeId","data-v-d9f81d11"]]);export{x as V};
