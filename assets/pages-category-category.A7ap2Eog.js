import{_ as a,k as s,t as e,c as l,w as t,v as c,O as r,x as o,M as u,y as i,o as n,a as d,z as f,A as p,B as m,C as g,J as _,D as v,F as y,E as h,K as k,L as b,H as w,G as C}from"./vendor.Ckgv2xgH.js";import{r as x,s as j}from"./request.Bx5oBM20.js";import{p as q}from"./product.CkM9Osij.js";import{u as z}from"./useSystem.Wa4UmrYm.js";import{g as F}from"./image.DRuPWd--.js";const I={async getCategories(){const a=await x(async()=>j.from("categories").select("*").order("sort",{ascending:!0}),{requestId:"categories_list",showLoading:!1});return a&&a.data?a.data:[]}},S=a({__name:"category",setup(a){const{statusBarHeight:x,navTo:j}=z(),S=s([]),B=s([]),H=s(0),L=s(0);e(()=>{(async()=>{const a=await I.getCategories();S.value=a,a.length>0&&A(0)})()});const A=async a=>{var s;H.value=a,r(()=>{L.value=0});const e=null==(s=S.value[a])?void 0:s.id;if(e){const a=await q.getProducts({categoryId:e,pageSize:50});B.value=a.list||[]}},D=a=>{};return(a,s)=>{const e=c,r=o(i("uni-icons"),u),q=m,z=_,I=C;return n(),l(e,{class:"container"},{default:t(()=>[d(e,{style:f({height:p(x)+"px"}),class:"status-bar-spacer"},null,8,["style"]),d(e,{class:"cat-header"},{default:t(()=>[d(e,{class:"search-box",onClick:s[0]||(s[0]=a=>p(j)("/pages/search/search"))},{default:t(()=>[d(r,{type:"search",size:"16",color:"#999"}),d(q,{class:"placeholder"},{default:t(()=>[g("搜索商品 / 品牌")]),_:1})]),_:1})]),_:1}),d(e,{class:"cat-header-spacer"}),d(e,{class:"category-wrapper"},{default:t(()=>[d(z,{"scroll-y":"",class:"left-aside","show-scrollbar":"false"},{default:t(()=>[(n(!0),v(y,null,h(S.value,(a,s)=>(n(),l(e,{key:a.id,class:k(["f-item",{active:s===H.value}]),onClick:a=>A(s)},{default:t(()=>[d(e,{class:"f-text"},{default:t(()=>[g(w(a.name),1)]),_:2},1024),s===H.value?(n(),l(e,{key:0,class:"active-indicator"})):b("",!0)]),_:2},1032,["class","onClick"]))),128)),d(e,{class:"spacer"})]),_:1}),d(z,{"scroll-y":"",class:"right-aside","scroll-top":L.value,onScroll:D,"show-scrollbar":"false"},{default:t(()=>[d(e,{class:"c-banner"},{default:t(()=>[d(I,{class:"c-banner-img",src:p(F)("/static/banner_new.png"),mode:"aspectFill"},null,8,["src"])]),_:1}),B.value.length>0?(n(),l(e,{key:0,class:"s-item"},{default:t(()=>[d(e,{class:"section-header"},{default:t(()=>[d(q,{class:"section-title"},{default:t(()=>{var a;return[g(w(null==(a=S.value[H.value])?void 0:a.name)+" 系列",1)]}),_:1})]),_:1}),d(e,{class:"t-list"},{default:t(()=>[(n(!0),v(y,null,h(B.value,a=>(n(),l(e,{class:"t-item",key:a.id,onClick:s=>(a=>{j(`/pages/product/product?id=${a.id}`)})(a)},{default:t(()=>[d(e,{class:"img-box"},{default:t(()=>[d(I,{class:"t-img",src:p(F)(a.cover),mode:"aspectFill"},null,8,["src"])]),_:2},1024),d(q,{class:"t-name"},{default:t(()=>[g(w(a.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):(n(),l(e,{key:1,class:"empty-box"},{default:t(()=>[d(q,null,{default:t(()=>[g("暂无商品")]),_:1})]),_:1})),d(e,{class:"bottom-spacer"})]),_:1},8,["scroll-top"])]),_:1})]),_:1})}}},[["__scopeId","data-v-d765aded"]]);export{S as default};
